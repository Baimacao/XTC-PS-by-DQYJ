<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API open interface | IMOO open platform | Document</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Imoo open platform,Imoo developer platform,Help developers better develop platform applications">
    
    <link rel="preload" href="static/css/0.styles.3e96b5ae.css" as="style"><link rel="preload" href="https://developer.okii.com/docs/assets/js/app.c5cf0902.js" as="script"><link rel="preload" href="https://developer.okii.com/docs/assets/js/2.64c56ba3.js" as="script"><link rel="preload" href="https://developer.okii.com/docs/assets/js/18.0a544859.js" as="script"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/10.7dabc864.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/11.a857b413.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/12.b65651e7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/13.0ec7aaa7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/14.ae03732c.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/15.bd585f03.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/16.8ce8785d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/17.83cf954d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/19.3e8a6e86.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/20.b97b66fb.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/21.e0a445ca.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/22.c6f18896.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/23.bb06cbb4.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/24.3a8f5dc7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/25.6258f33e.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/26.d995a2f2.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/27.1fadabf2.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/28.0708c0c2.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/29.3ac293a5.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/3.89808b9c.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/30.cd196038.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/31.29284ed9.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/32.6e0fbfcd.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/33.5b4e9fbb.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/34.faf644ab.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/35.d64c3b26.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/36.ffa0bc2d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/37.4efadb19.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/38.1301eb3d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/39.765462f8.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/4.40351588.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/40.8ae7b2ef.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/41.b53a935b.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/42.1b8db389.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/43.57d2f36e.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/44.4f42e10b.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/45.49d1f12c.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/46.b00351d5.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/47.ee33eed7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/48.d593d13f.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/49.90697f7e.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/5.7d14a609.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/50.eb9d6e79.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/6.145dd442.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/7.d2b7988b.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/8.63a01d72.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/9.f91da2c8.js">
    <link rel="stylesheet" href="static/css/0.styles.3e96b5ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewbox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="en.html" class="home-link router-link-active"><!----> <span class="site-name">IMOO open platform | Document</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apply for admission
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="03-function.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apply for admission
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="03-function.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>App release</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="01-shelf1.html" class="sidebar-link">Shelving process</a></li><li><a href="03-version1.html" class="sidebar-link">Version provided</a></li><li><a href="02-resource1.html" class="sidebar-link">Audit specifications</a></li><li><a href="04-principle1.html" class="sidebar-link">Principles for removal from the imoo App store</a></li><li><a href="05-notice1.html" class="sidebar-link">Handling process for infringement complaints</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Development guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="00-model1.html" class="sidebar-link">Open-type model</a></li><li><a href="01-setting1.html" class="sidebar-link">Basic configuration</a></li><li><a href="02-permission1.html" class="sidebar-link">App permission</a></li><li><a href="" aria-current="page" class="active sidebar-link">API open interface</a></li><li><a href="04-optimization1.html" class="sidebar-link">Precautions</a></li><li><a href="06-problem1.html" class="sidebar-link">Common problems</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Design guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="interaction1.html" class="sidebar-link">Interactive design</a></li><li><a href="vision1.html" class="sidebar-link">Visual design</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-open-interface"><a href="#api-open-interface" class="header-anchor">#</a> API open interface</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-account-system">1. Account system</a></li><li><a href="#_2-sharing-function">2.Sharing function</a><ul><li><a href="#_2-1-obtain-sharing-capability">2.1 Obtain sharing capability</a></li><li><a href="#_2-2-check-if-the-version-supports-your-requirements">2.2 Check if the version supports your requirements</a></li><li><a href="#_2-3-share-specified-content-types">2.3 Share specified content types</a></li><li><a href="#_2-4-share-callback">2.4 Share callback</a></li><li><a href="#_2-5-sharing-in-specific-channels">2.5 Sharing in specific channels</a></li><li><a href="#_2-6-precautions">2.6 Precautions</a></li><li><a href="#_2-7-to-be-supported-features">2.7 To-be supported Features</a></li></ul></li></ul></div><p></p> <h2 id="_1-account-system"><a href="#_1-account-system" class="header-anchor">#</a> 1. Account system</h2> <p>In the case of networking, the initial machine will have an openId which will only change after binding if it is unbound by the administrator. Unbundling by the administrator will reset the watch system, making it equivalently new. The method of obtaining is as follows:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">CONTENT_OPENID_TYPE</span> <span class="token operator">=</span> <span class="token string">&quot;content://com.xtc.provider/BaseDataProvider/openID/8&quot;</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">CONTENT_OPENID_TYPE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The minimum supported versions are XTC Z2_V1.5.6、XTC Z3_V1.2.6、XTC Z5_V1.2.6、XTC Z6_V1.0.0、imoo Z5_1.1.1</p> <h2 id="_2-sharing-function"><a href="#_2-sharing-function" class="header-anchor">#</a> 2.Sharing function</h2> <h3 id="_2-1-obtain-sharing-capability"><a href="#_2-1-obtain-sharing-capability" class="header-anchor">#</a> 2.1 Obtain sharing capability</h3> <ul><li><p>Contact imoo personnel to apply for a shared AppKey.</p></li> <li><p>Introduce jar package</p></li></ul> <h3 id="_2-2-check-if-the-version-supports-your-requirements"><a href="#_2-2-check-if-the-version-supports-your-requirements" class="header-anchor">#</a> 2.2 Check if the version supports your requirements</h3> <p>If there are special requirements, you can check first and then share, otherwise you don't need to execute it. In the SDK, if the version is not supported, a Toast popup will appear by default, indicating that the current version does not support sharing to XX.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query whether to support sharing to chat</span>

<span class="token keyword">boolean</span> isSupport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShareMessageManager</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkBaseVersion</span><span class="token punctuation">(</span><span class="token class-name">Scene</span><span class="token punctuation">.</span><span class="token constant">TYPE_CHAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Query whether to support sharing to friend circle</span>

<span class="token keyword">boolean</span> isSupport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShareMessageManager</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkBaseVersion</span><span class="token punctuation">(</span><span class="token class-name">Scene</span><span class="token punctuation">.</span><span class="token constant">TYPE_MOMENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-3-share-specified-content-types"><a href="#_2-3-share-specified-content-types" class="header-anchor">#</a> 2.3 Share specified content types</h3> <ul><li>Share text type</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Step 1: Create an object of XTCTextObject and set the text property to the text content to be shared</span>

<span class="token class-name">XTCTextObject</span> xtcTextObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCTextObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xtcTextObject<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;Sharing from test program&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 2: Create an object of XTCShareMessage and set the property of shareObject to the object of xtcTextObject</span>

<span class="token class-name">XTCShareMessage</span> xtcShareMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCShareMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xtcShareMessage<span class="token punctuation">.</span><span class="token function">setShareObject</span><span class="token punctuation">(</span>xtcTextObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 3: Create an object of SendMessageToXTC.Request and set it</span>

<span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>xtcShareMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 4: Create an object of ShareMessageManagr, call the method of sendRequestToXTC, and pass in the object of SendMessageToXTC.Request and AppKey</span>

<span class="token keyword">new</span> <span class="token class-name">ShareMessageManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendRequestToXTC</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;appkey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Share image type</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Step 1: Create an object of XTCImageObject and set the property of bitmap to the image to share</span>

<span class="token class-name">XTCImageObject</span> xtcImageObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCImageObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xtcImageObject<span class="token punctuation">.</span><span class="token function">setBitmap</span><span class="token punctuation">(</span><span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>mipmap<span class="token punctuation">.</span>img_show<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//If the image is in a public directory, you can set the image path directly</span>

xtcImageObject<span class="token punctuation">.</span><span class="token function">setImagePath</span><span class="token punctuation">(</span>“filePath”<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 2: Create an object of XTCShareMessage and set the property of shareObject to the object of xtcTextObject</span>

<span class="token class-name">XTCShareMessage</span> xtcShareMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCShareMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xtcShareMessage<span class="token punctuation">.</span><span class="token function">setShareObject</span><span class="token punctuation">(</span>xtcImageObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 3: Create an object of SendMessageToXTC.Request and set the property of message to xtcShareMessage</span>

<span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>xtcShareMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 4: Create an object of ShareMessageManagr, call the method of sendRequestToXTC, and pass in the object of SendMessageToXTC.Request and AppKey</span>

<span class="token keyword">new</span> <span class="token class-name">ShareMessageManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendRequestToXTC</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;appKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Share program type (graphic and textual types)</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Step 1: Create an object of XTCAppExtendObject</span>

<span class="token class-name">XTCAppExtendObject</span> xtcAppExtendObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCAppExtendObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Set the start page for click-to-share content</span>

xtcAppExtendObject<span class="token punctuation">.</span><span class="token function">setStartActivity</span><span class="token punctuation">(</span><span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Set the shared extension information so that clicking on shared content will bring the extension information to the jump page</span>

xtcAppExtendObject<span class="token punctuation">.</span><span class="token function">setExtInfo</span><span class="token punctuation">(</span><span class="token string">&quot;ExtendInfo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 2: Create an object of XTCShareMessage and set the property of shareObject to the object of xtcTextObject.</span>

<span class="token class-name">XTCShareMessage</span> xtcShareMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCShareMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xtcShareMessage<span class="token punctuation">.</span><span class="token function">setShareObject</span><span class="token punctuation">(</span>xtcAppExtendObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Set picture</span>

xtcShareMessage<span class="token punctuation">.</span><span class="token function">setThumbImage</span><span class="token punctuation">(</span><span class="token class-name">BitmapFactory</span><span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>mipmap<span class="token punctuation">.</span>img_app<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Set text</span>

xtcShareMessage<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span>&quot;<span class="token class-name">This</span> is graphic textual sharing information<span class="token punctuation">.</span>
&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 3: Create an object of SendMessageToXTC.Request and set the property of message to xtcShareMessage</span>

<span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>xtcShareMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 4: Create an object of ShareMessageManagr, call the method of sendRequestToXTC, and pass in the object of SendMessageToXTC.Request and AppKey</span>

<span class="token keyword">new</span> <span class="token class-name">ShareMessageManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendRequestToXTC</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;appKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-4-share-callback"><a href="#_2-4-share-callback" class="header-anchor">#</a> 2.4 Share callback</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Step 1: Implement the interface of IResponseCallback</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token keyword">implements</span> <span class="token class-name">IResponseCallback</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

<span class="token comment">//Step 2: Handle callbacks in the methods of onCreate and onNewIntent</span>

<span class="token keyword">private</span> <span class="token class-name">IXTCCallback</span> xtcCallback<span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Handling callbacks</span>

    xtcCallback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XTCCallbackImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xtcCallback<span class="token punctuation">.</span><span class="token function">handleIntent</span><span class="token punctuation">(</span><span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onNewIntent</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onNewIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Handling callbacks</span>

    xtcCallback<span class="token punctuation">.</span><span class="token function">handleIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Step 3: implement the methods of onResp and onReq</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResp</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isSuccess<span class="token punctuation">,</span> <span class="token class-name">BaseResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//to-do</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReq</span><span class="token punctuation">(</span><span class="token class-name">ShowMessageFromXTC<span class="token punctuation">.</span>Request</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//to-do</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>onResp method</li></ul> <p>This method is a callback for sharing result information after being used to click share.</p> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>isSuccess</td> <td>Determining whether sharing was successful</td></tr> <tr><td>response.getCode()</td> <td>Callback status code, which can be determined by BaseResponse.Code</td></tr> <tr><td>response.getErrorDesc()</td> <td>Description of status code</td></tr> <tr><td>response.getConversationId()</td> <td>The shared session ID of the friend circle is -1, which is returned after the session ID of the chat has been encrypted</td></tr> <tr><td>response.getTransaction()</td> <td>Unique logo sharing</td></tr></tbody></table> <ul><li>onReq method</li></ul> <p>This method is a callback which can jump to the specified page after being used to click on the shared program information in the chat or friend circle.</p> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>request.getExtInfo()</td> <td>The extInfo attribute of the XTCAppExtendObject object setting</td></tr> <tr><td>request.getScene()</td> <td>The shared scene, scene.getType() determines the scene type: Scene.TYPE_CHAT is chat and Scene.TYPE_MOMENT is friend circle.</td></tr> <tr><td>request.getTransaction()</td> <td>Unique logo sharing</td></tr></tbody></table> <h3 id="_2-5-sharing-in-specific-channels"><a href="#_2-5-sharing-in-specific-channels" class="header-anchor">#</a> 2.5 Sharing in specific channels</h3> <p><img src="static/picture/share.cbb68163.png" alt="image"></p> <p>In addition to jumping to a channel selection page (see figure above), after the above click share, it can also jump to the channel selection page and share directly to the specified channel. The detailed method is as follows:</p> <ul><li>Share to chat</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Step 1: Create a scene</span>

<span class="token class-name">Chat</span> chat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Chat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//If the session is not allowed to be displayed, set the default status as friends and friend groups</span>

chat<span class="token punctuation">.</span><span class="token function">setFriendType</span><span class="token punctuation">(</span><span class="token class-name">Chat</span><span class="token punctuation">.</span><span class="token constant">FRIEND</span><span class="token operator">|</span><span class="token class-name">Chat</span><span class="token punctuation">.</span><span class="token constant">FRIEND_GROUP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//For friends who need to be filtered, pass in the list of coveragesId (conversitionId comes from the onReq method)</span>

chat<span class="token punctuation">.</span><span class="token function">setFilterConversationList</span><span class="token punctuation">(</span>filterConversationList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Filter machine-type</span>

chat<span class="token punctuation">.</span><span class="token function">setFilterModeList</span><span class="token punctuation">(</span>filterModeList<span class="token punctuation">)</span>
<span class="token comment">//Clicking filtered-friends requires the text content of Toast</span>

chat<span class="token punctuation">.</span><span class="token function">setFilterTip</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>share_error_limit<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 2: Set the scene into the object of SendMessageToXTC.Request</span>

<span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setScene</span><span class="token punctuation">(</span>chat<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Share to friend circle</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Step 1: Create a scene</span>

<span class="token class-name">Moment</span> moment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Step 2: Set the scene to the object of SendMessageToXTC.Request</span>

<span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SendMessageToXTC<span class="token punctuation">.</span>Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">setScene</span><span class="token punctuation">(</span>moment <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-6-precautions"><a href="#_2-6-precautions" class="header-anchor">#</a> 2.6 Precautions</h3> <ul><li>For a new ShareMessageManager (context), the context must be an activity.</li></ul> <ul><li>Try to use the 8-bit icon for the application icon, or else the compressed icon will be too large and take up excessive server resources.</li></ul> <h3 id="_2-7-to-be-supported-features"><a href="#_2-7-to-be-supported-features" class="header-anchor">#</a> 2.7 To-be supported Features</h3> <ul><li><p>Photography by camera, acquisition of album</p></li> <li><p>Push</p></li> <li><p>Step</p></li> <li><p>Locate</p></li> <li><p>Video recording</p></li> <li><p>Carrying out activities to consume points</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/19/2019, 5:27:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="02-permission1.html" class="prev">
        App permission
      </a></span> <span class="next"><a href="04-optimization1.html">
        Precautions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="static/js/app.c5cf0902.js" defer=""></script><script src="static/js/2.64c56ba3.js" defer=""></script><script src="static/js/18.0a544859.js" defer=""></script>
  </body>
</html>
