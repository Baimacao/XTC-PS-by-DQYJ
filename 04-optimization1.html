<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Precautions | IMOO open platform | Document</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Imoo open platform,Imoo developer platform,Help developers better develop platform applications">
    
    <link rel="preload" href="static/css/0.styles.3e96b5ae.css" as="style"><link rel="preload" href="https://developer.okii.com/docs/assets/js/app.c5cf0902.js" as="script"><link rel="preload" href="https://developer.okii.com/docs/assets/js/2.64c56ba3.js" as="script"><link rel="preload" href="https://developer.okii.com/docs/assets/js/36.ffa0bc2d.js" as="script"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/10.7dabc864.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/11.a857b413.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/12.b65651e7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/13.0ec7aaa7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/14.ae03732c.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/15.bd585f03.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/16.8ce8785d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/17.83cf954d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/18.0a544859.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/19.3e8a6e86.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/20.b97b66fb.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/21.e0a445ca.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/22.c6f18896.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/23.bb06cbb4.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/24.3a8f5dc7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/25.6258f33e.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/26.d995a2f2.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/27.1fadabf2.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/28.0708c0c2.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/29.3ac293a5.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/3.89808b9c.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/30.cd196038.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/31.29284ed9.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/32.6e0fbfcd.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/33.5b4e9fbb.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/34.faf644ab.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/35.d64c3b26.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/37.4efadb19.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/38.1301eb3d.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/39.765462f8.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/4.40351588.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/40.8ae7b2ef.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/41.b53a935b.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/42.1b8db389.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/43.57d2f36e.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/44.4f42e10b.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/45.49d1f12c.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/46.b00351d5.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/47.ee33eed7.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/48.d593d13f.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/49.90697f7e.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/5.7d14a609.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/50.eb9d6e79.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/6.145dd442.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/7.d2b7988b.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/8.63a01d72.js"><link rel="prefetch" href="https://developer.okii.com/docs/assets/js/9.f91da2c8.js">
    <link rel="stylesheet" href="static/css/0.styles.3e96b5ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewbox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="en.html" class="home-link router-link-active"><!----> <span class="site-name">IMOO open platform | Document</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apply for admission
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="04-optimization.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apply for admission
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="javascript:;" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="04-optimization.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>App release</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="01-shelf1.html" class="sidebar-link">Shelving process</a></li><li><a href="03-version1.html" class="sidebar-link">Version provided</a></li><li><a href="02-resource1.html" class="sidebar-link">Audit specifications</a></li><li><a href="04-principle1.html" class="sidebar-link">Principles for removal from the imoo App store</a></li><li><a href="05-notice1.html" class="sidebar-link">Handling process for infringement complaints</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Development guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="00-model1.html" class="sidebar-link">Open-type model</a></li><li><a href="01-setting1.html" class="sidebar-link">Basic configuration</a></li><li><a href="02-permission1.html" class="sidebar-link">App permission</a></li><li><a href="03-function1.html" class="sidebar-link">API open interface</a></li><li><a href="" aria-current="page" class="active sidebar-link">Precautions</a></li><li><a href="06-problem1.html" class="sidebar-link">Common problems</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Design guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="interaction1.html" class="sidebar-link">Interactive design</a></li><li><a href="vision1.html" class="sidebar-link">Visual design</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="precautions"><a href="#precautions" class="header-anchor">#</a> Precautions</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-memory">1 Memory</a><ul><li><a href="#_1-1-memory-requirements">1.1 Memory requirements</a></li><li><a href="#_1-2-memory-usage-principle">1.2 Memory usage principle</a></li></ul></li><li><a href="#_2-power-optimization">2. Power optimization</a></li><li><a href="#_3-installation-package-size">3. Installation package size</a></li><li><a href="#_4-hot-updates-disabled">4. Hot updates disabled</a></li><li><a href="#_5-storage-specifications">5. Storage specifications</a></li><li><a href="#_6-traffic-usage">6. Traffic usage</a><ul><li><a href="#_6-1-reminders-and-restrictions-for-traffic-usage">6.1 Reminders and restrictions for traffic usage</a></li><li><a href="#_6-2-traffic-switch">6.2 Traffic switch</a></li></ul></li><li><a href="#_7-audio-focus-conflict">7. Audio focus conflict</a><ul><li><a href="#_7-1-apps-with-sound-playback-should-correctly-handle-the-acquisition-and-loss-of-audio-focus">7.1 Apps with sound playback should correctly handle the acquisition and loss of audio focus</a></li><li><a href="#_7-2-audio-playback-sequence">7.2 Audio playback sequence</a></li><li><a href="#_7-3-audio-cache-problem">7.3 Audio cache problem</a></li></ul></li></ul></div><p></p> <h2 id="_1-memory"><a href="#_1-memory" class="header-anchor">#</a> 1 Memory</h2> <h3 id="_1-1-memory-requirements"><a href="#_1-1-memory-requirements" class="header-anchor">#</a> 1.1 Memory requirements</h3> <p>Do not exceed 35M for more than 90% of the time period of CPU operation. CPU usage shall not exceed 10% overall.</p> <h3 id="_1-2-memory-usage-principle"><a href="#_1-2-memory-usage-principle" class="header-anchor">#</a> 1.2 Memory usage principle</h3> <ul><li>The maximum memory that can be used by a single App is 48M. If exceeded, the memory overflow will be reported.</li></ul> <ul><li>Be careful to use memory allocation under the native level to prevent memory leaks.</li></ul> <ul><li>It is prohibited to apply large memory under the native level to avoid exceeding the 48M memory limit.</li></ul> <ul><li>Try to use an image with a well-matched size, and use the resource cache appropriately.</li></ul> <ul><li>Try to use the background service independent process running method.</li></ul> <ul><li>Reuse the resources that come with the system.</li></ul> <ul><li>Avoid creating objects in the onDraw method.</li></ul> <ul><li>Optimize the layout hierarchy, reduce memory consumption and ensure that View is not overdrawn.</li></ul> <h2 id="_2-power-optimization"><a href="#_2-power-optimization" class="header-anchor">#</a> 2. Power optimization</h2> <ul><li>Use the wake-up lock with caution, and remember to release it after using it for special requirements.</li></ul> <ul><li>Be sure to check the status of the network for services that need to request the network, and avoid retrying work in a repeated manner.</li></ul> <ul><li>The background service should merge or reduce the necessary wake-up work.</li></ul> <ul><li>To avoid the situation where the screen is always on, there must be a time limit for screen-always-on.</li></ul> <ul><li>Minimize log printing.</li></ul> <ul><li>Avoid static broadcast monitoring.</li></ul> <h2 id="_3-installation-package-size"><a href="#_3-installation-package-size" class="header-anchor">#</a> 3. Installation package size</h2> <ul><li>If the ROM of the watch model reaches up to 4G and above: the size of the installation package should not exceed 30M, and the space occupied after installation should not exceed 40M.</li></ul> <ul><li>If the ROM of the watch model is 512M: the size of the installation package should not exceed 10M, and the space occupied after installation should not exceed 15M.</li></ul> <h2 id="_4-hot-updates-disabled"><a href="#_4-hot-updates-disabled" class="header-anchor">#</a> 4. Hot updates disabled</h2> <p>All new features are required to be reviewed by the imoo App store, and hot updates shall not be allowed.</p> <h2 id="_5-storage-specifications"><a href="#_5-storage-specifications" class="header-anchor">#</a> 5. Storage specifications</h2> <ul><li>After an App is uninstalled, data related to that App can be completely deleted.</li></ul> <ul><li>Third-party App storage can only be implemented under the package name /sdcard/Android/data/third-party/or package name directory /data/data/.</li></ul> <ul><li>The third party itself needs to handle the matters after data has been deleted. If the downloaded music has been deleted, the playlist should not be displayed.</li></ul> <ul><li>When the user cleans up the space, the watch will delete the package name /sdcard/Android/data/and package name directory /data/data/.</li></ul> <ul><li>In principle, after the user cleans up the space, the space occupied by the third-party App should be the same as before its initial installation.</li></ul> <h2 id="_6-traffic-usage"><a href="#_6-traffic-usage" class="header-anchor">#</a> 6. Traffic usage</h2> <p>As traffic consumption is an issue to which users pay close attention, reminders and management of traffic usage need to be supported.</p> <h3 id="_6-1-reminders-and-restrictions-for-traffic-usage"><a href="#_6-1-reminders-and-restrictions-for-traffic-usage" class="header-anchor">#</a> 6.1 Reminders and restrictions for traffic usage</h3> <ul><li>For the first time using network traffic, the user must be reminded by Toast.</li></ul> <ul><li>When the network is disconnected, the audio needs to be paused. When the network is connected, playback is not allowed to be resumed, leaving the pause state intact.</li></ul> <ul><li>In principle, the favorite broadcast audio should be cached as much as possible. When quickly switching to other audio, the stopping of mediaPlayer should be called in an active manner and the caching of the previous audio should be cancelled, thereby reducing traffic consumption.</li></ul> <h3 id="_6-2-traffic-switch"><a href="#_6-2-traffic-switch" class="header-anchor">#</a> 6.2 Traffic switch</h3> <p>The imoo parent-end App currently controls the traffic switch of a single App on the watch, and the usage experience of the App requires further attention when traffic is disabled.</p> <ul><li>Related files for traffic switch</li></ul> <blockquote><p>See the attachment <a href="javascript:;">&quot;Java files for traffic switch&quot;</a></p></blockquote> <ul><li>The code determines whether it is currently disabled or not</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">NetworkPolicyForApp</span> networkPolicyForApp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NetworkPolicyForApp</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> isDisabled <span class="token operator">=</span> networkPolicyForApp<span class="token punctuation">.</span><span class="token function">isMobileTrafficDisabled</span><span class="token punctuation">(</span><span class="token string">&quot;packageName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_7-audio-focus-conflict"><a href="#_7-audio-focus-conflict" class="header-anchor">#</a> 7. Audio focus conflict</h2> <h3 id="_7-1-apps-with-sound-playback-should-correctly-handle-the-acquisition-and-loss-of-audio-focus"><a href="#_7-1-apps-with-sound-playback-should-correctly-handle-the-acquisition-and-loss-of-audio-focus" class="header-anchor">#</a> 7.1 Apps with sound playback should correctly handle the acquisition and loss of audio focus</h3> <p>Achieve the acquisition of audio focus before starting playback. In case of the loss of audio focus, pause playback.</p> <h3 id="_7-2-audio-playback-sequence"><a href="#_7-2-audio-playback-sequence" class="header-anchor">#</a> 7.2 Audio playback sequence</h3> <ul><li>The watch does not allow two or more audio files to be played simultaneously.</li></ul> <ul><li>Audio playback follows a sequence. If a new application for audio focus occurs, the previous active one will pause automatically.</li></ul> <h3 id="_7-3-audio-cache-problem"><a href="#_7-3-audio-cache-problem" class="header-anchor">#</a> 7.3 Audio cache problem</h3> <p>Asynchronous caching can easily result in ANR. It is preferable to use the synchronous caching method to enable sub-thread synchronous caching.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/23/2019, 9:03:12 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="03-function1.html" class="prev">
        API open interface
      </a></span> <span class="next"><a href="06-problem1.html">
        Common problems
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="static/js/app.c5cf0902.js" defer=""></script><script src="static/js/2.64c56ba3.js" defer=""></script><script src="static/js/36.ffa0bc2d.js" defer=""></script>
  </body>
</html>
