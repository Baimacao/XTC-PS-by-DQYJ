(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{361:function(a,t,_){"use strict";_.r(t);var s=_(13),v=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[a._v("#")]),a._v(" 注意事项")]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#_1-内存"}},[a._v("1 内存")]),t("ul",[t("li",[t("a",{attrs:{href:"#_1-1-内存要求"}},[a._v("1.1 内存要求")])]),t("li",[t("a",{attrs:{href:"#_1-2-内存使用原则"}},[a._v("1.2 内存使用原则")])])])]),t("li",[t("a",{attrs:{href:"#_2-功耗优化"}},[a._v("2. 功耗优化")]),t("ul",[t("li",[t("a",{attrs:{href:"#_2-1-基础要求"}},[a._v("2.1 基础要求")])]),t("li",[t("a",{attrs:{href:"#_2-2-功耗优化"}},[a._v("2.2 功耗优化")])]),t("li",[t("a",{attrs:{href:"#_2-3-功耗建议"}},[a._v("2.3 功耗建议")])])])]),t("li",[t("a",{attrs:{href:"#_3-安装包大小"}},[a._v("3. 安装包大小")])]),t("li",[t("a",{attrs:{href:"#_4-不允许热更新"}},[a._v("4. 不允许热更新")])]),t("li",[t("a",{attrs:{href:"#_5-存储规范"}},[a._v("5. 存储规范")])]),t("li",[t("a",{attrs:{href:"#_6-流量使用"}},[a._v("6. 流量使用")]),t("ul",[t("li",[t("a",{attrs:{href:"#_6-1-流量使用提醒与限制"}},[a._v("6.1 流量使用提醒与限制")])]),t("li",[t("a",{attrs:{href:"#_6-2-流量开关"}},[a._v("6.2 流量开关")])])])]),t("li",[t("a",{attrs:{href:"#_7-音频焦点冲突"}},[a._v("7. 音频焦点冲突")]),t("ul",[t("li",[t("a",{attrs:{href:"#_7-1-有声音播放的app应正确处理音频焦点的获得与失去"}},[a._v("7.1 有声音播放的APP应正确处理音频焦点的获得与失去")])]),t("li",[t("a",{attrs:{href:"#_7-2-音频播放先后顺序"}},[a._v("7.2 音频播放先后顺序")])]),t("li",[t("a",{attrs:{href:"#_7-3-音频缓冲问题"}},[a._v("7.3 音频缓冲问题")])])])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"_1-内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-内存"}},[a._v("#")]),a._v(" 1 内存")]),a._v(" "),t("h3",{attrs:{id:"_1-1-内存要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-内存要求"}},[a._v("#")]),a._v(" 1.1 内存要求")]),a._v(" "),t("p",[a._v("不得超过35M，CPU使用超过90%的时间段不超过总体的10%。")]),a._v(" "),t("h3",{attrs:{id:"_1-2-内存使用原则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-内存使用原则"}},[a._v("#")]),a._v(" 1.2 内存使用原则")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("单个应用可使用的最大内存为48M，超过将报内存溢出")])]),a._v(" "),t("li",[t("p",[a._v("慎用native下的内存分配，防止内存泄漏。")])]),a._v(" "),t("li",[t("p",[a._v("禁止在native申请大内存来规避48M的内存限制。")])]),a._v(" "),t("li",[t("p",[a._v("图片尽量使用适配的大小，资源缓存使用适当。")])]),a._v(" "),t("li",[t("p",[a._v("尽量减少后台服务独立进程运行的方式。")])]),a._v(" "),t("li",[t("p",[a._v("复用系统自带的资源。")])]),a._v(" "),t("li",[t("p",[a._v("避免在onDraw方法里面执行对象的创建。")])]),a._v(" "),t("li",[t("p",[a._v("优化布局层次，减少内存消耗, 确保View不会过度绘制。")])])]),a._v(" "),t("h2",{attrs:{id:"_2-功耗优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-功耗优化"}},[a._v("#")]),a._v(" 2. 功耗优化")]),a._v(" "),t("h3",{attrs:{id:"_2-1-基础要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-基础要求"}},[a._v("#")]),a._v(" 2.1 基础要求")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("慎用唤醒锁，特殊需求使用后一定要记得释放。")])]),a._v(" "),t("li",[t("p",[a._v("对于需要请求网络的服务一定要注意检测网络的状况，避免不停的重试工作。")])]),a._v(" "),t("li",[t("p",[a._v("后台服务合并或减少必要的唤醒工作。")])]),a._v(" "),t("li",[t("p",[a._v("避免屏幕常亮的情形，要有常亮时间限制。")])]),a._v(" "),t("li",[t("p",[a._v("尽量减少日志打印。")])]),a._v(" "),t("li",[t("p",[a._v("避免静态广播监听。")])])]),a._v(" "),t("h3",{attrs:{id:"_2-2-功耗优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-功耗优化"}},[a._v("#")]),a._v(" 2.2 功耗优化")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("小电池设备，需要尽可能的降低使用功耗和待机功耗。")])]),a._v(" "),t("li",[t("p",[a._v("应用内待机，无网络请求等唤醒操作。")])]),a._v(" "),t("li",[t("p",[a._v("禁止后台长连接，禁止保活。")])]),a._v(" "),t("li",[t("p",[a._v("禁止空闲应用访问摄像头、麦克风和传感器。")])]),a._v(" "),t("li",[t("p",[a._v("禁止无故持锁，干扰系统休眠。")])])]),a._v(" "),t("h3",{attrs:{id:"_2-3-功耗建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-功耗建议"}},[a._v("#")]),a._v(" 2.3 功耗建议")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("背景色尽量以深色为主。")])]),a._v(" "),t("li",[t("p",[a._v("尽量减少动画。")])]),a._v(" "),t("li",[t("p",[a._v("音效不要一直播放，即使是音量0，也有几十毫安的电流。")])]),a._v(" "),t("li",[t("p",[a._v("网络数据交互尽可能在时间上对齐。比如有两个请求，一个是0s时刻请求，另一个是5s时刻请求，如果能够将这两个请求都在0s时刻请求，网络方面的功耗会降低一半。")])])]),a._v(" "),t("h2",{attrs:{id:"_3-安装包大小"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装包大小"}},[a._v("#")]),a._v(" 3. 安装包大小")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("手表ROM达4G及以上机型：安装包大小不超过30M，安装后空间占用不超过40M。")])]),a._v(" "),t("li",[t("p",[a._v("手表ROM为512M机型：安装包大小不超过10M，安装后空间占用不超过15M。")])])]),a._v(" "),t("h2",{attrs:{id:"_4-不允许热更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-不允许热更新"}},[a._v("#")]),a._v(" 4. 不允许热更新")]),a._v(" "),t("p",[a._v("所有新特性都需要经过小天才应用商店审核，不允许热更新。")]),a._v(" "),t("h2",{attrs:{id:"_5-存储规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-存储规范"}},[a._v("#")]),a._v(" 5. 存储规范")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("要求应用卸载后，能完全删除与该应用相关数据。")])]),a._v(" "),t("li",[t("p",[a._v("第三方应用存储只能在/sdcard/Android/data/第三方包名/或/data/data/包名目录下。")])]),a._v(" "),t("li",[t("p",[a._v("第三方需自行处理数据被删除后的事宜，如下载音乐被删除，播放列表就不要显示等。")])]),a._v(" "),t("li",[t("p",[a._v("用户清理空间时，手表将删除/sdcard/Android/data/包名/和data/data/包名下目录。")])]),a._v(" "),t("li",[t("p",[a._v("原则上用户清理空间后，第三方应用所占空间大小应和初始安装一致。")])])]),a._v(" "),t("h2",{attrs:{id:"_6-流量使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-流量使用"}},[a._v("#")]),a._v(" 6. 流量使用")]),a._v(" "),t("p",[a._v("流量消耗作为用户较为关注的使用问题，需支持流量使用提醒和管控。")]),a._v(" "),t("h3",{attrs:{id:"_6-1-流量使用提醒与限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-流量使用提醒与限制"}},[a._v("#")]),a._v(" 6.1 流量使用提醒与限制")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("用户第一次使用流量，必须Toast提醒。")])]),a._v(" "),t("li",[t("p",[a._v("断网时，需暂停播放音频，来网时不允许继续播放，依然维持在暂停状态。")])]),a._v(" "),t("li",[t("p",[a._v("常播音频原则上尽量缓存，快速切音频的时，需主动调用mediaPlayer的stop，取消上一音频的缓冲，减少流量消耗。")])])]),a._v(" "),t("h3",{attrs:{id:"_6-2-流量开关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-流量开关"}},[a._v("#")]),a._v(" 6.2 流量开关")]),a._v(" "),t("p",[a._v("小天才家长端APP当前可控制手表单个应用的流量开关，应用需重点关注流量禁用时的使用体验。")]),a._v(" "),t("ul",[t("li",[a._v("流量开关相关文件")])]),a._v(" "),t("blockquote",[t("p",[a._v("见附件 "),t("RouterLink",{attrs:{to:"/develop/07-annex.html#流量控制附件"}},[a._v("流量开关java文件")])],1)]),a._v(" "),t("ul",[t("li",[a._v("代码判断当前是否被禁用")])]),a._v(" "),t("blockquote",[t("p",[a._v("注意： 调用下面代码之前，请先判断当前手表的网络是否是数据流量网络，如果是WiFi的情况下，不要调用！！！否则可能会出现不对的逻辑。")])]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NetworkPolicyForApp")]),a._v(" networkPolicyForApp "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NetworkPolicyForApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("boolean")]),a._v(" isDisabled "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" networkPolicyForApp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("isMobileTrafficDisabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"packageName"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("h2",{attrs:{id:"_7-音频焦点冲突"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-音频焦点冲突"}},[a._v("#")]),a._v(" 7. 音频焦点冲突")]),a._v(" "),t("h3",{attrs:{id:"_7-1-有声音播放的app应正确处理音频焦点的获得与失去"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-有声音播放的app应正确处理音频焦点的获得与失去"}},[a._v("#")]),a._v(" 7.1 有声音播放的APP应正确处理音频焦点的获得与失去")]),a._v(" "),t("p",[a._v("开始播放前获取音频焦点，失去音频焦点暂停播放。")]),a._v(" "),t("h3",{attrs:{id:"_7-2-音频播放先后顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-音频播放先后顺序"}},[a._v("#")]),a._v(" 7.2 音频播放先后顺序")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("手表不允许音频同时播放。")])]),a._v(" "),t("li",[t("p",[a._v("音频播放遵循先后顺序，后面申请音频焦点，前面的主动暂停。")])])]),a._v(" "),t("h3",{attrs:{id:"_7-3-音频缓冲问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-音频缓冲问题"}},[a._v("#")]),a._v(" 7.3 音频缓冲问题")]),a._v(" "),t("p",[a._v("异步缓冲现在容易anr，优先使用同步缓冲的方法，开启子线程同步缓冲即可。")])])}),[],!1,null,null,null);t.default=v.exports}}]);