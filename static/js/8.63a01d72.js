(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{238:function(t,s,a){t.exports=a.p+"assets/img/watchenv.cc85e2db.jpg"},302:function(t,s,a){t.exports=a.p+"assets/img/account01.4c8ed0ea.png"},303:function(t,s,a){t.exports=a.p+"assets/img/account03.9ceb4381.png"},304:function(t,s,a){t.exports=a.p+"assets/img/account02.7f74336d.png"},363:function(t,s,a){"use strict";a.r(s);var r=a(13),n=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"账号系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#账号系统"}},[t._v("#")]),t._v(" 账号系统")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#_1-小天才账号系统是什么"}},[t._v("1. 小天才账号系统是什么？")])]),s("li",[s("a",{attrs:{href:"#_2-账号系统对接流程"}},[t._v("2. 账号系统对接流程")]),s("ul",[s("li",[s("a",{attrs:{href:"#_2-1-小天才开放平台入驻申请"}},[t._v("2.1 小天才开放平台入驻申请")])]),s("li",[s("a",{attrs:{href:"#_2-2-开发对接"}},[t._v("2.2 开发对接")])]),s("li",[s("a",{attrs:{href:"#_2-3-测试对接"}},[t._v("2.3 测试对接")])]),s("li",[s("a",{attrs:{href:"#_2-4-应用上线"}},[t._v("2.4 应用上线")])])])]),s("li",[s("a",{attrs:{href:"#_3-账号系统对接指引"}},[t._v("3. 账号系统对接指引")]),s("ul",[s("li",[s("a",{attrs:{href:"#_3-1-账号授权服务时序图"}},[t._v("3.1 账号授权服务时序图")])]),s("li",[s("a",{attrs:{href:"#_3-2-根据授权码调用token接口获取身份凭证accesstoken"}},[t._v("3.2 根据授权码调用token接口获取身份凭证accessToken")])]),s("li",[s("a",{attrs:{href:"#_3-3-根据refreshtoken接口获取新的accesstoken"}},[t._v("3.3 根据refreshToken接口获取新的accessToken")])])])]),s("li",[s("a",{attrs:{href:"#_4-获取用户账号信息"}},[t._v("4. 获取用户账号信息")]),s("ul",[s("li",[s("a",{attrs:{href:"#_4-1-概述"}},[t._v("4.1 概述")])]),s("li",[s("a",{attrs:{href:"#_4-2-根据accesstoken获取用户信息"}},[t._v("4.2 根据accessToken获取用户信息")])]),s("li",[s("a",{attrs:{href:"#_4-3-新openid转换成旧openid兼容逻辑处理-2019年9月之前接入的第三方使用"}},[t._v("4.3  新openId转换成旧openId兼容逻辑处理（2019年9月之前接入的第三方使用）")])])])]),s("li",[s("a",{attrs:{href:"#_5-开放排名服务"}},[t._v("5. 开放排名服务")]),s("ul",[s("li",[s("a",{attrs:{href:"#_5-1-概述"}},[t._v("5.1 概述")])]),s("li",[s("a",{attrs:{href:"#_5-2-开放排名服务时序图"}},[t._v("5.2 开放排名服务时序图")])]),s("li",[s("a",{attrs:{href:"#_5-3-上传应用排名数据"}},[t._v("5.3 上传应用排名数据")])]),s("li",[s("a",{attrs:{href:"#_5-4-获取好友排行榜数据"}},[t._v("5.4 获取好友排行榜数据")])]),s("li",[s("a",{attrs:{href:"#_5-5-获取校园排行榜数据"}},[t._v("5.5 获取校园排行榜数据")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"_1-小天才账号系统是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-小天才账号系统是什么"}},[t._v("#")]),t._v(" 1. 小天才账号系统是什么？")]),t._v(" "),s("p",[t._v("通俗的讲，就是一个手表在一个应用中的账号，一个手表在不同应用的账号标识都是不同且唯一的。此外，基于小天才账号授权可获取用户昵称、头像等基本信息，也可在此之上提供应用服务号、好友排行等服务。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(302),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_2-账号系统对接流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-账号系统对接流程"}},[t._v("#")]),t._v(" 2. 账号系统对接流程")]),t._v(" "),s("h3",{attrs:{id:"_2-1-小天才开放平台入驻申请"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-小天才开放平台入驻申请"}},[t._v("#")]),t._v(" 2.1 小天才开放平台入驻申请")]),t._v(" "),s("p",[t._v("您在开放平台填完"),s("strong",[t._v("入驻申请之后，在微信群中通知XTC的同学")]),t._v("，XTC这边审核之后会给您的应用分配appId、appSecret和第三方应用权限范围（默认头像、名称和推送），之后会将appId和appSecret信息同步到群中。")]),t._v(" "),s("h3",{attrs:{id:"_2-2-开发对接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-开发对接"}},[t._v("#")]),t._v(" 2.2 开发对接")]),t._v(" "),s("ul",[s("li",[t._v("需集成表端账户系统sdk。")]),t._v(" "),s("li",[s("strong",[t._v("sdk获取方式：")]),t._v(" 群中找小天才的技术同学获取。")])]),t._v(" "),s("h3",{attrs:{id:"_2-3-测试对接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-测试对接"}},[t._v("#")]),t._v(" 2.3 测试对接")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("测试环境的appId、appSecret与正式环境"),s("strong",[t._v("可能不同")]),t._v("，在微信群同步应用时会说明appId和appSecret对应哪个环境，您在对应环境使用对应的appId等应用信息传参即可。")])]),t._v(" "),s("li",[s("p",[t._v("访问小天才的服务器接口，调试时请使用测试环境域名，调试成功提测正式版本，请换成正式环境域名。")]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("strong",[t._v("测试环境域名：")]),t._v(" https://api-module.okii.com")]),t._v(" "),s("li",[s("strong",[t._v("正式环境域名：")]),t._v(" https://api.watch.okii.com")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("请注意，手表有测试环境和正式环境之分")]),t._v("。判断手表当前环境：点击手表绑定号—>观察右上角，如果有模块二字，则为测试环境，否则为正式环境，下图为测试环境手表示例图。")])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(238),alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("手表环境的切换方式：")]),t._v(" 请在微信群联系小天才的同学。")])]),t._v(" "),s("h3",{attrs:{id:"_2-4-应用上线"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-应用上线"}},[t._v("#")]),t._v(" 2.4 应用上线")]),t._v(" "),s("h2",{attrs:{id:"_3-账号系统对接指引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-账号系统对接指引"}},[t._v("#")]),t._v(" 3. 账号系统对接指引")]),t._v(" "),s("h3",{attrs:{id:"_3-1-账号授权服务时序图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-账号授权服务时序图"}},[t._v("#")]),t._v(" 3.1 账号授权服务时序图")]),t._v(" "),s("p",[s("img",{attrs:{src:a(303),alt:"账号授权服务时序图"}})]),t._v(" "),s("blockquote",[s("p",[t._v("注：当前appId、appSecret和第三方应用权限范围由小天才服务器分配后在群里进行信息同步。")])]),t._v(" "),s("h3",{attrs:{id:"_3-2-根据授权码调用token接口获取身份凭证accesstoken"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-根据授权码调用token接口获取身份凭证accesstoken"}},[t._v("#")]),t._v(" 3.2 根据授权码调用token接口获取身份凭证accessToken")]),t._v(" "),s("h4",{attrs:{id:"_3-2-1-调用时机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-调用时机"}},[t._v("#")]),t._v(" 3.2.1 调用时机")]),t._v(" "),s("ul",[s("li",[t._v("您从客户端"),s("strong",[t._v("通过sdk拿到授权认证码code后")]),t._v("，授权码code的"),s("strong",[t._v("有效期为10分钟")]),t._v("。")])]),t._v(" "),s("h4",{attrs:{id:"_3-2-2-接口说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-接口说明"}},[t._v("#")]),t._v(" 3.2.2 接口说明")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("功能：拿到手表的临时身份信息凭证，通过这个凭证可以获取手表头像、名称等信息。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("请求方式：POST")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("协议类型：HTTPS")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("数据格式：json")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("服务URL：")])]),t._v(" "),s("blockquote",[s("p",[t._v("测试环境：https://api-module.okii.com/oauth/token")]),t._v(" "),s("p",[t._v("正式环境：https://api.watch.okii.com/oauth/token")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("注意：用户可以主动取消授权，此时之前获取的token便不再有效，目前取消授权不会通知第三方。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("消息方向：第三方应用->开放服务")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("请求参数")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("appId")]),t._v(" "),s("td",[t._v("第三方应用唯一标识")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("由小天才分配给接入方的应用标识ID")])]),t._v(" "),s("tr",[s("td",[t._v("appSecret")]),t._v(" "),s("td",[t._v("第三方应用秘钥")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("由小天才分配给接入方的应用秘钥")])]),t._v(" "),s("tr",[s("td",[t._v("code")]),t._v(" "),s("td",[t._v("授权认证码")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[s("strong",[t._v("通过小天才手表SDK获取的授权码code（有效期10分钟）")])])]),t._v(" "),s("tr",[s("td",[t._v("grantType")]),t._v(" "),s("td",[t._v("授权类型")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("固定值:"),s("strong",[t._v("authorization_code")])])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appSecret"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"grantType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authorization_code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//固定值")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0b6bbfedc7044676a65c63e6959d81c2"')]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//授权码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"000001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUCCESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3d9eb36db7594c569702a940e9e86b0d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用户授权凭证，有效期3天")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expiresTime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("259200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// token过期时间，单位秒（S）")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"refreshToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8e49c6c296024518bf352c97a29cadf7"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// token过期时可以通过该参数获取新的token，有效期90天")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a614044b00a8406387aeba629b0e4f75"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 表示该手表在该应用的唯一ID")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scope"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("注：scope传值范围目前有下列几种，权限需要小天才开放平台进行分配")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("值")]),t._v(" "),s("th",[t._v("权限名称")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("用户的基础信息")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("用户好友排行")])]),t._v(" "),s("tr",[s("td",[t._v("5")]),t._v(" "),s("td",[t._v("服务号更新时推送到家庭圈、手表")])])])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12002"')]),t._v(" "),s("td",[t._v("授权类型有误")])]),t._v(" "),s("tr",[s("td",[t._v('"12007"')]),t._v(" "),s("td",[t._v("APPID或APPSecret信息无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12004"')]),t._v(" "),s("td",[t._v("授权码已过期、已经被使用过或者不存在（"),s("strong",[t._v("如果不是前两种情况，请检查手表环境和服务器的调用环境URL是否一致，手表环境查看见2.3节")]),t._v("）")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-3-根据refreshtoken接口获取新的accesstoken"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-根据refreshtoken接口获取新的accesstoken"}},[t._v("#")]),t._v(" 3.3 根据refreshToken接口获取新的accessToken")]),t._v(" "),s("h4",{attrs:{id:"_3-3-1-功能描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-功能描述"}},[t._v("#")]),t._v(" 3.3.1 功能描述")]),t._v(" "),s("p",[t._v("您通过授权认证码"),s("code",[t._v("code")]),t._v("调用"),s("code",[t._v("token")]),t._v("接口获取"),s("code",[t._v("accessToken")]),t._v("（"),s("strong",[t._v("有效期三天")]),t._v("）的同时会返回一个"),s("code",[t._v("refreshToken")]),t._v("（"),s("strong",[t._v("有效期三个月")]),t._v("），当"),s("code",[t._v("accessToken")]),t._v("过期后可通过"),s("code",[t._v("refreshToken")]),t._v("接口获取新的"),s("code",[t._v("accessToken")]),t._v("，相当于续期操作。")]),t._v(" "),s("h4",{attrs:{id:"_3-3-2-接口说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-接口说明"}},[t._v("#")]),t._v(" 3.3.2 接口说明")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("请求方式：POST")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("协议类型：HTTPS")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("数据格式：json")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("服务URL：")])]),t._v(" "),s("blockquote",[s("p",[t._v("测试环境：https://api-module.okii.com/oauth/refreshToken")]),t._v(" "),s("p",[t._v("正式环境：https://api.watch.okii.com/oauth/refreshToken")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("消息方向：第三方应用->授权服务")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("请求参数")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("appId")]),t._v(" "),s("td",[t._v("第三方应用唯一标识")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("由小天才分配给接入方的应用标识ID")])]),t._v(" "),s("tr",[s("td",[t._v("appSecret")]),t._v(" "),s("td",[t._v("第三方应用秘钥")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("由小天才分配给接入方的应用秘钥")])]),t._v(" "),s("tr",[s("td",[t._v("grantType")]),t._v(" "),s("td",[t._v("授权类型")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("固定值: "),s("strong",[t._v("refresh_token")])])]),t._v(" "),s("tr",[s("td",[t._v("refreshToken")]),t._v(" "),s("td",[t._v("刷新token")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("3.2节token接口返回的refreshToken")])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appSecret"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"grantType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"refresh_token"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//固定值")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"refreshToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"e6c189f9cc2449b59d5eff12c1616eed"')]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//刷新token(在获取token的接口会返回")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"000001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUCCESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3d9eb36db7594c569702a940e9e86b0d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expiresTime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("259200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"refreshToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8e49c6c296024518bf352c97a29cadf7"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a614044b00a8406387aeba629b0e4f75"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scope"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("注意：")]),t._v(" 在使用过"),s("code",[t._v("refreshToken")]),t._v("之后，会返回一个新的"),s("code",[t._v("refreshToken")]),t._v("，原先的"),s("code",[t._v("refreshToken")]),t._v("一分钟后失效。")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12002"')]),t._v(" "),s("td",[t._v("授权类型有误")])]),t._v(" "),s("tr",[s("td",[t._v('"12007"')]),t._v(" "),s("td",[t._v("APPID或APPSecret信息无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12005"')]),t._v(" "),s("td",[t._v("refreshToken无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12006"')]),t._v(" "),s("td",[t._v("授权无效，重新走用户授权流程")])])])]),t._v(" "),s("h2",{attrs:{id:"_4-获取用户账号信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-获取用户账号信息"}},[t._v("#")]),t._v(" 4. 获取用户账号信息")]),t._v(" "),s("h3",{attrs:{id:"_4-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-概述"}},[t._v("#")]),t._v(" 4.1 概述")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("调用方：")]),t._v(" 第三方服务器")]),t._v(" "),s("li",[s("strong",[t._v("作用：")]),t._v(" 通过"),s("code",[t._v("accessToken")]),t._v("获取用户相关信息")]),t._v(" "),s("li",[s("strong",[t._v("测试环境域名：")]),t._v(" https://api-module.okii.com")]),t._v(" "),s("li",[s("strong",[t._v("正式环境域名：")]),t._v(" https://api.watch.okii.com")])]),t._v(" "),s("h3",{attrs:{id:"_4-2-根据accesstoken获取用户信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-根据accesstoken获取用户信息"}},[t._v("#")]),t._v(" 4.2 根据accessToken获取用户信息")]),t._v(" "),s("p",[t._v("根据"),s("code",[t._v("accessToken")]),t._v("获取"),s("strong",[t._v("用户授权的信息")]),t._v("，信息包括"),s("strong",[t._v("头像、昵称、用户的唯一标识openId")]),t._v("（若第三方应用成功在平台上申请了其它权限，可获取更多授权信息）。")]),t._v(" "),s("h4",{attrs:{id:"_4-2-1-接口说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-接口说明"}},[t._v("#")]),t._v(" 4.2.1 接口说明")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("请求方式：POST")])]),t._v(" "),s("li",[s("strong",[t._v("协议类型：HTTPS（POST请求）")])]),t._v(" "),s("li",[s("strong",[t._v("数据格式：json")])]),t._v(" "),s("li",[s("strong",[t._v("服务URL（测试环境域名）：https://api-module.okii.com/resource-service/resource/getUserInfo")])]),t._v(" "),s("li",[s("strong",[t._v("消息方向：第三方应用->资源服务")])]),t._v(" "),s("li",[s("strong",[t._v("请求参数")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("accessToken")]),t._v(" "),s("td",[t._v("授权令牌")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("授权令牌")])]),t._v(" "),s("tr",[s("td",[t._v("openId")]),t._v(" "),s("td",[t._v("用户openId")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("用户"),s("code",[t._v("openId")]),t._v("，"),s("code",[t._v("token")]),t._v("或者"),s("code",[t._v("refreshToken")]),t._v("返回的手表标识ID")])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f94d6ff02e134624bfd2fa1ddcb0fdd9"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c204f68d78aa41f88002f0f2374732d"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"avatarUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://watchcdn.okii.com/xxx.jpg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手表头像地址")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nickName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhangwtest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手表名称")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f94d6ff02e134624bfd2fa1ddcb0fdd9"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"unionId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cfghc6ff02e134624bfd2fa1ddcb0fdd9"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开发者和用户的唯一id")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12008"')]),t._v(" "),s("td",[t._v("accessToken无效或过期")])]),t._v(" "),s("tr",[s("td",[t._v('"12010"')]),t._v(" "),s("td",[t._v("无效openId")])]),t._v(" "),s("tr",[s("td",[t._v('"12009"')]),t._v(" "),s("td",[t._v("该应用没有此权限")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-3-新openid转换成旧openid兼容逻辑处理-2019年9月之前接入的第三方使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-新openid转换成旧openid兼容逻辑处理-2019年9月之前接入的第三方使用"}},[t._v("#")]),t._v(" 4.3  新openId转换成旧openId兼容逻辑处理（2019年9月之前接入的第三方使用）")]),t._v(" "),s("h4",{attrs:{id:"_4-3-1-接口说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-接口说明"}},[t._v("#")]),t._v(" 4.3.1 接口说明")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("请求方式：POST")])]),t._v(" "),s("li",[s("strong",[t._v("协议类型：HTTPS")])]),t._v(" "),s("li",[s("strong",[t._v("数据格式：json")])]),t._v(" "),s("li",[s("strong",[t._v("服务URL（测试环境域名）：https://api-module.okii.com/resource-service/resource/getOldOpenId")])]),t._v(" "),s("li",[s("strong",[t._v("消息方向：第三方应用->获取用户账号信息服务")])]),t._v(" "),s("li",[s("strong",[t._v("请求参数")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("accessToken")]),t._v(" "),s("td",[t._v("授权令牌")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("授权令牌")])]),t._v(" "),s("tr",[s("td",[t._v("openId")]),t._v(" "),s("td",[t._v("用户openId")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("用户openId")])]),t._v(" "),s("tr",[s("td",[t._v("appId")]),t._v(" "),s("td",[t._v("第三方应用id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("第三方应用id")])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100005")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authList"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"58223983efd14a59ba37620379be85c2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d8b34acddb248898b5b178740f2fe26"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"704737e9feac4963bab34ea8b2451008"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"76ef8684e5014a3cb237878778f5085b"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"000001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUCCESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新openId->旧openId的映射map")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"76ef8684e5014a3cb237878"')]),t._v("(新openId)"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8461B6A1564DF055A54F3EFF053D93A3"')]),t._v("(旧openId)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"2d8b34acddb248898b5b178740f2fe26"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C8A58D1C2539A96AC85AEC2481D7BBD9FF42BC5E3"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12010"')]),t._v(" "),s("td",[t._v("无效openId")])]),t._v(" "),s("tr",[s("td",[t._v('"12099"')]),t._v(" "),s("td",[t._v("其他错误")])])])]),t._v(" "),s("h2",{attrs:{id:"_5-开放排名服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-开放排名服务"}},[t._v("#")]),t._v(" 5. 开放排名服务")]),t._v(" "),s("h3",{attrs:{id:"_5-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-概述"}},[t._v("#")]),t._v(" 5.1 概述")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("调用方：")]),t._v(" 第三方服务器")]),t._v(" "),s("li",[s("strong",[t._v("作用：")]),t._v(" 实现排行榜功能，提高第三方应用活跃度")]),t._v(" "),s("li",[s("strong",[t._v("测试环境域名：")]),t._v(" https://api-module.okii.com")]),t._v(" "),s("li",[s("strong",[t._v("正式环境域名：")]),t._v(" https://api.watch.okii.com")])]),t._v(" "),s("h3",{attrs:{id:"_5-2-开放排名服务时序图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-开放排名服务时序图"}},[t._v("#")]),t._v(" 5.2 开放排名服务时序图")]),t._v(" "),s("p",[s("img",{attrs:{src:a(304),alt:"开放排名服务时序图"}})]),t._v(" "),s("h3",{attrs:{id:"_5-3-上传应用排名数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-上传应用排名数据"}},[t._v("#")]),t._v(" 5.3 上传应用排名数据")]),t._v(" "),s("h4",{attrs:{id:"_5-3-1-接口说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-接口说明"}},[t._v("#")]),t._v(" 5.3.1 接口说明")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("请求方式：POST")])]),t._v(" "),s("li",[s("strong",[t._v("协议类型：HTTPS（POST请求）")])]),t._v(" "),s("li",[s("strong",[t._v("数据格式：json")])]),t._v(" "),s("li",[s("strong",[t._v("服务URL（测试环境域名）：https://api-module.okii.com/resource-service/ranking/thirdParty/uploadData")])]),t._v(" "),s("li",[s("strong",[t._v("消息方向：第三方应用->开放排名服务")])]),t._v(" "),s("li",[s("strong",[t._v("请求参数")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("accessToken")]),t._v(" "),s("td",[t._v("授权令牌")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("授权令牌")])]),t._v(" "),s("tr",[s("td",[t._v("openId")]),t._v(" "),s("td",[t._v("用户openId")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("用户openId")])]),t._v(" "),s("tr",[s("td",[t._v("appId")]),t._v(" "),s("td",[t._v("第三方应用id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("第三方应用id")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("应用排名类型")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("第三方应用类型（旧数据和默认为1）")])]),t._v(" "),s("tr",[s("td",[t._v("data")]),t._v(" "),s("td",[t._v("应用排名数据")]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("应用排名数据（"),s("strong",[t._v("数字类型采用Long接收")]),t._v("）")])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c5284b3270134be28e957fe570c3e54a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1d27d3391e094828b57db767b4161e93"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"000001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUCCESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//data等于1时上报成功，为-1时上报失败，null时未更新数据(非最高分)")]),t._v("\n\n\n\n")])])]),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12010"')]),t._v(" "),s("td",[t._v("无效openId")])]),t._v(" "),s("tr",[s("td",[t._v('"12011"')]),t._v(" "),s("td",[t._v("授权超过申请范围")])]),t._v(" "),s("tr",[s("td",[t._v('"12099"')]),t._v(" "),s("td",[t._v("其他错误")])]),t._v(" "),s("tr",[s("td",[t._v('"12009"')]),t._v(" "),s("td",[t._v("该appId没有权限")])])])]),t._v(" "),s("h3",{attrs:{id:"_5-4-获取好友排行榜数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-获取好友排行榜数据"}},[t._v("#")]),t._v(" 5.4 获取好友排行榜数据")]),t._v(" "),s("h4",{attrs:{id:"_5-4-1-接口说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-1-接口说明"}},[t._v("#")]),t._v(" 5.4.1 接口说明")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("请求方式：POST")])]),t._v(" "),s("li",[s("strong",[t._v("协议类型：HTTPS")])]),t._v(" "),s("li",[s("strong",[t._v("数据格式：json")])]),t._v(" "),s("li",[s("strong",[t._v("服务URL（测试环境域名）：https://api-module.okii.com/resource-service/ranking/thirdParty/getRankingList")])]),t._v(" "),s("li",[s("strong",[t._v("消息方向：第三方应用->开放排名服务")])]),t._v(" "),s("li",[s("strong",[t._v("请求参数")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("accessToken")]),t._v(" "),s("td",[t._v("授权令牌")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("授权令牌")])]),t._v(" "),s("tr",[s("td",[t._v("openId")]),t._v(" "),s("td",[t._v("用户openId")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("用户openId")])]),t._v(" "),s("tr",[s("td",[t._v("appId")]),t._v(" "),s("td",[t._v("第三方应用id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("第三方应用id")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("应用排名类型")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("第三方应用类型（旧数据和默认为1）")])]),t._v(" "),s("tr",[s("td",[t._v("sortType")]),t._v(" "),s("td",[t._v("应用排序类型")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("排序类型:DESC,ASC（默认倒序）")])]),t._v(" "),s("tr",[s("td",[t._v("page")]),t._v(" "),s("td",[t._v("分页参数")]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("分页实体")])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c5284b3270134be28e957fe570c3e54a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1d27d3391e094828b57db767b4161e93"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sortType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DESC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"page"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分页参数，非必须，不填返回全部")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pageSize"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一页的数量")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nowPage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第几页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"000001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUCCESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排行数据列表")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d8b34acddb248898b5b178740f2fe26"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"白Z5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手表昵称")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://qn.authtest.okii.com/user_avat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 头像地址")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100005")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rank"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排名")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extra"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 个人的排名，rank值为-1时表示没有排行数据")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28a49be2c4334494a4aff0c3ec428438"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://qn.authtest.okii.com/user_avat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 头像地址")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100037")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rank"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"page"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分页信息，入参有分页信息时则返回")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nowPage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前页")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"totalRecord"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 总记录数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"totalPage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 总页数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pageSize"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一页的数量")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"startIndex"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 起始下标")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n")])])]),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12010"')]),t._v(" "),s("td",[t._v("无效openId")])]),t._v(" "),s("tr",[s("td",[t._v('"12011"')]),t._v(" "),s("td",[t._v("授权超过申请范围")])]),t._v(" "),s("tr",[s("td",[t._v('"12099"')]),t._v(" "),s("td",[t._v("其他错误，联系XTC开发查明原因")])]),t._v(" "),s("tr",[s("td",[t._v('"12009"')]),t._v(" "),s("td",[t._v("该appId没有权限")])])])]),t._v(" "),s("h3",{attrs:{id:"_5-5-获取校园排行榜数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-获取校园排行榜数据"}},[t._v("#")]),t._v(" 5.5 获取校园排行榜数据")]),t._v(" "),s("h4",{attrs:{id:"_5-5-1-接口说明-获取同一个学校内该应用的排行榜。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-1-接口说明-获取同一个学校内该应用的排行榜。"}},[t._v("#")]),t._v(" 5.5.1 接口说明：获取同一个学校内该应用的排行榜。")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("请求方式：POST")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("协议类型：HTTPS")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("数据格式：json")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("服务URL（测试环境域名）：https://api-module.okii.com/resource-service/ranking/thirdParty/getSchoolRankingList")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("消息方向：第三方应用->开放排名服务")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("注意：")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("只会展示"),s("strong",[t._v("学校、年级和班级三项信息全部填写")]),t._v("的数据。")])]),t._v(" "),s("li",[s("p",[t._v("数据源数据"),s("strong",[t._v("并非实时数据")]),t._v("，"),s("strong",[t._v("周一凌晨1点之前")]),t._v("填写的周二同步，"),s("strong",[t._v("周四凌晨1点之前")]),t._v("填写周五同步。如：我在周一早上9点填写了学校、年级和班级，那么数据会在周五进行同步，如果周日填写则周二同步。")])]),t._v(" "),s("li",[s("p",[t._v("由于成本原因，"),s("strong",[t._v("测试环境的校园排行榜数据不再维护")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("​\t小天才这边的建议是测试环境确认好友排行榜没问题之后上正式测试校园排行榜，因为校园排行榜的参数跟好友排行榜是完全一致的，好友排行榜无误的话基本上校园排行榜的入参也不会有问题。")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("请求参数")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("参数名称")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("参数说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("accessToken")]),t._v(" "),s("td",[t._v("授权令牌")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("授权令牌")])]),t._v(" "),s("tr",[s("td",[t._v("openId")]),t._v(" "),s("td",[t._v("用户openId")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("用户openId")])]),t._v(" "),s("tr",[s("td",[t._v("appId")]),t._v(" "),s("td",[t._v("第三方应用id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("第三方应用id")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("应用排名类型")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("第三方应用类型（旧数据和默认为1）")])]),t._v(" "),s("tr",[s("td",[t._v("sortType")]),t._v(" "),s("td",[t._v("应用排序类型")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("排序类型:DESC,ASC（默认倒序）")])]),t._v(" "),s("tr",[s("td",[t._v("page")]),t._v(" "),s("td",[t._v("分页实体")]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("分页参数")])])])]),t._v(" "),s("ul",[s("li",[t._v("示例")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c5284b3270134be28e957fe570c3e54a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"accessToken"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1d27d3391e094828b57db767b4161e93"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sortType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DESC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"page"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 选填，不填默认返回全部")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pageSize"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一页的数量")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nowPage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第几页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n")])])]),s("ul",[s("li",[s("strong",[t._v("响应消息")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"000001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUCCESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排行数据列表")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d8b34acddb248898b5b178740f2fe26"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"白Z5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手表昵称")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://qn.authtest.okii.com/user_avat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 头像地址")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100005")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rank"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排名")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extra"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 个人的排名，rank值为-1时表示没有排行数据")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"openId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28a49be2c4334494a4aff0c3ec428438"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://qn.authtest.okii.com/user_avat"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 头像地址")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100037")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rank"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"page"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分页信息，入参有分页信息时则返回")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nowPage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前页")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"totalRecord"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 总记录数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"totalPage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 总页数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pageSize"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一页的数量")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"startIndex"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 起始下标")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n")])])]),s("ul",[s("li",[s("strong",[t._v("返回状态")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态码")]),t._v(" "),s("th",[t._v("提示消息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v('"12001"')]),t._v(" "),s("td",[t._v("参数无效")])]),t._v(" "),s("tr",[s("td",[t._v('"12010"')]),t._v(" "),s("td",[t._v("无效openId")])]),t._v(" "),s("tr",[s("td",[t._v('"12011"')]),t._v(" "),s("td",[t._v("授权超过申请范围")])]),t._v(" "),s("tr",[s("td",[t._v('"12099"')]),t._v(" "),s("td",[t._v("其他错误，联系XTC开发查明原因")])]),t._v(" "),s("tr",[s("td",[t._v('"12009"')]),t._v(" "),s("td",[t._v("此范围未授权")])]),t._v(" "),s("tr",[s("td",[t._v('"12012","12206"')]),t._v(" "),s("td",[t._v("用户没有填写学校年级班级信息，或者还未进行同步，原因见"),s("RouterLink",{attrs:{to:"/develop/09-account.html#_5-5-获取校园排行榜数据"}},[t._v("5.5.1 接口说明")]),t._v("的"),s("strong",[t._v("注意")])],1)])])])])}),[],!1,null,null,null);s.default=n.exports}}]);